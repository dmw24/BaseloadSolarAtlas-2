<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harnessing the Sun | Baseload Solar Atlas</title>

    <!-- SEO Meta -->
    <meta name="description"
        content="Can solar panels and batteries provide reliable baseload power around the clock? An interactive exploration of global solar potential.">

    <!-- DNS Prefetch & Preconnect -->
    <link rel="dns-prefetch" href="https://cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://d3js.org">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Preload critical resources -->
    <link rel="preload" href="js/parquet_wasm_bg.wasm" as="fetch" crossorigin>
    <link rel="preload" href="data/simulation_results_summary.parquet" as="fetch" crossorigin>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Libre Baskerville', 'Georgia', 'serif'],
                    },
                    colors: {
                        surface: '#1e1e1e',
                        'surface-variant': '#2d2d2d',
                        primary: '#a8c7fa',
                        'on-surface': '#e3e3e3',
                        outline: '#8e918f',
                        accent: '#f59e0b',
                    }
                }
            }
        }
    </script>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
        rel="stylesheet" />

    <!-- Custom Scrolly CSS -->
    <link rel="stylesheet" href="css/scrolly.css">
</head>

<body class="bg-black text-on-surface font-sans overflow-x-hidden">

    <!-- Loading Overlay -->
    <div id="loading" class="fixed inset-0 bg-black z-50 flex items-center justify-center">
        <div class="text-center space-y-4">
            <div class="w-12 h-12 border-4 border-surface-variant border-t-primary rounded-full animate-spin mx-auto">
            </div>
            <div class="text-gray-300 font-medium">Initializing Atlas...</div>
            <div class="text-xs text-gray-500" id="loading-status">Loading assets...</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="scrolly-container">

        <!-- Left Panel: Article -->
        <article class="scrolly-article" id="article">

            <!-- Header / Hero -->
            <header class="scrolly-hero" data-section="hero">
                <div class="scrolly-hero-content">
                    <div class="text-accent text-sm font-medium uppercase tracking-widest mb-4">Energy Transition</div>
                    <h1 class="scrolly-title">Harnessing the Sun</h1>
                    <p class="scrolly-subtitle">How Solar and Battery Power Will Transform The World</p>
                    <div class="scrolly-byline">
                        <span>By Daan Walter</span>
                        <span class="mx-2">•</span>
                        <span>January 2026</span>
                    </div>
                    <div class="scroll-indicator">
                        <span class="material-symbols-outlined animate-bounce">expand_more</span>
                        <span class="text-xs text-gray-500">Scroll to explore</span>
                    </div>
                </div>
            </header>

            <!-- Introduction -->
            <section class="scrolly-section" data-section="introduction" id="section-introduction">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">Introduction</h2>

                    <p>Solar is cheap, but intermittent. Batteries help, but baseload power, we are often told, still
                        requires something else.</p>

                    <p>Here, we put that assumption to a simple test.</p>

                    <p>We divide the world into roughly 5,000 regions, each around 30–40,000 square kilometres in size—about
                        the size of Maryland or Belgium—and ask one question: how much always-on electricity could each
                        region supply using only solar and batteries?</p>

                    <p>To make the test deliberately hard, we assume a constant 1 megawatt, 24/7 baseload demand everywhere.
                        Real-world demand is rarely this flat. If solar and batteries perform well under this worst-case
                        assumption, they perform even better in practice.</p>

                    <p>What follows are nine things we think are widely underappreciated about solar, storage, and reliable
                        power.</p>
                </div>
            </section>

            <!-- Section 1: The Solar Paradox -->
            <section class="scrolly-section" data-section="potential-map" id="section-1">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">1. Solar energy is abundant</h2>

                    <p class="scrolly-drop-cap">Before considering reliability, it helps to start with volume: how much
                        solar energy do we get compared to how much electricity we use?</p>

                    <p>Looking only at annual totals, we compare feasible solar generation—accounting for land and basic
                        technical constraints—with today’s electricity demand across all ~5,000 regions. To the right,
                        you can see the result.</p>

                    <p>In almost every region, annual solar potential exceeds local electricity demand, often by several
                        multiples. This is true not only in deserts, but across Europe, North America, East Asia, and even
                        far northern and southern regions.</p>

                    <p>On an annual basis, nearly the entire world could meet its electricity demand with solar alone.
                        Self‑sufficiency is not the problem.</p>
                </div>
            </section>

            <!-- Section 2: Mapping the Solar Potential -->
            <section class="scrolly-section" data-section="battery-shadow" id="section-2">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">2. Batteries make the sun shine at night</h2>

                    <p>If annual energy were all that mattered, the transition would already be complete. The real
                        challenge is timing.</p>

                    <p>Solar output peaks during the day, falls to zero at night, and varies from one day to the next.
                        This mismatch limits how much solar can be used without storage.</p>

                    <p>Batteries solve this problem by shifting energy through time—first into the evening, then through
                        the night, and eventually across days. To the right, you can see this effect directly.</p>

                    <p>As battery capacity increases, more solar generation is stored rather than curtailed, allowing the
                        system to supply electricity for a larger share of the day.</p>
                </div>
            </section>

            <!-- Section 3: Batteries can take us surprisingly far toward baseload -->
            <section class="scrolly-section" data-section="battery-capacity" id="section-3">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">3. Batteries can take us surprisingly far toward baseload</h2>

                    <p>As storage is added, solar systems become steadily more reliable.</p>

                    <p>More batteries mean more solar energy can be saved from sunny hours and used later—first to cover
                        evenings, then nights, and eventually periods of weak sunlight within the week.</p>

                    <p>To the right, this appears as a steady rise in uptime. With realistic amounts of storage, many
                        regions reach 80–90% uptime, and some go higher.</p>

                    <p>This is already comparable to, or better than, the reliability of many existing power systems.
                        Batteries do not need to deliver perfection to be transformative.</p>
                </div>
            </section>

            <!-- Section 4: This is not just for desert countries -->
            <section class="scrolly-section" data-section="widespread" id="section-4">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">4. This is not just for desert countries</h2>

                    <p>High-uptime solar-plus-battery systems are often assumed to work only in exceptional locations.
                        The Masdar project in Abu Dhabi is frequently cited as such a case.</p>

                    <p>Masdar combines 6 MW of solar with 20 MWh of batteries, achieving over 99% uptime. It is a
                        milestone—but often treated as a one-off enabled by desert conditions.</p>

                    <p>So we asked: what if a Masdar-like system were built everywhere? Using the same configuration,
                        we simulate performance across all ~5,000 regions. To the right, you can see the results.</p>

                    <p>Across much of the tropics and subtropics—and well into temperate regions—the same setup delivers
                        very high uptime, often above 90%. The lesson from Masdar is not that it is unique, but that it
                        is broadly replicable.</p>
                </div>
            </section>

            <!-- Section 5: High-uptime solar is cheapest where people live -->
            <section class="scrolly-section" data-section="cheap-populous" id="section-5">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">5. High-uptime solar is cheapest where people live</h2>

                    <p>High-uptime solar is often associated with remote deserts. But most people live in the global
                        sunbelt.</p>

                    <p>To compare regions fairly, we start with global average costs for solar, batteries, and
                        financing. Under these assumptions, the lowest costs for high-uptime solar align closely with
                        population centres—India, Southeast Asia, sub-Saharan Africa, and Latin America.</p>

                    <p>Of course, real-world costs differ. Capital costs vary with market maturity, and financing costs
                        reflect country risk. To the right, you can see how the picture changes when local capital
                        costs and local costs of capital are applied.</p>

                    <p>This effect is not unique to solar. Coal and gas projects face the same financing constraints.
                        Adjusting for local conditions raises costs across technologies, but does not remove the
                        underlying advantage of high-uptime solar where solar resources are strong.</p>

                    <p>Even with these local factors, achieving 80–90% uptime with solar and batteries remains
                        competitive across much of the developing world.</p>
                </div>
            </section>

            <!-- Section 6: Cheap exactly where electricity access is weakest -->
            <section class="scrolly-section" data-section="cheap-access" id="section-6">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">6. Cheap exactly where electricity access is weakest</h2>

                    <p>Nearly a billion people still lack reliable electricity, and many more experience frequent
                        outages.</p>

                    <p>Many of these regions also have some of the most attractive economics for solar and batteries.
                        In parts of sub-Saharan Africa and South Asia, high-uptime solar can be delivered more cheaply
                        than extending and reinforcing the central grid.</p>

                    <p>For communities without reliable power, this is decisive. Solar-plus-battery systems can be
                        deployed quickly, scaled incrementally, and deliver transformative improvements in service—without
                        waiting decades for centralised infrastructure.</p>
                </div>
            </section>

            <!-- Section 7: Better uptime than many existing grids -->
            <section class="scrolly-section" data-section="better-uptime" id="section-7">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">7. Better uptime than many existing grids</h2>

                    <p>A widely underappreciated fact is that 1.5–2 billion people already live with unreliable grid
                        electricity.</p>

                    <p>Delivering near-perfect uptime through centralised systems is expensive. It requires redundancy
                        across generation, transmission, and last‑mile connections—costs that rise sharply in rural and
                        low-income areas.</p>

                    <p>In this context, high-uptime solar-plus-battery systems can offer a better electricity product.
                        Where grid uptime averages 60–80%, a solar system delivering 85–90% uptime is not second-best—it
                        is an upgrade.</p>

                    <p>This enables leapfrogging. Communities can adopt reliable power sooner, scale over time, and
                        improve service quality faster than waiting for the grid alone to catch up.</p>
                </div>
            </section>

            <!-- Section 8: High-uptime solar is cheapest where new capacity is being planned -->
            <section class="scrolly-section" data-section="planned-capacity" id="section-8">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">8. High-uptime solar is cheapest where new capacity is being planned</h2>

                    <p>Electricity demand is still growing, especially in emerging economies. To meet it, governments
                        are planning large amounts of new coal, gas, and nuclear capacity.</p>

                    <p>These plans are concentrated in the same regions where high-uptime solar-plus-battery systems
                        already perform best. Much of the world’s planned firm capacity sits in regions where solar and
                        batteries can deliver comparable reliability at lower cost. To the right, you can see this
                        overlap.</p>

                    <p>A large share of future power plants therefore does not need to be fossil or nuclear. They could
                        be built as high-uptime solar and storage instead.</p>
                </div>
            </section>

            <!-- Section 9: Getting cheaper over time -->
            <section class="scrolly-section" data-section="lcoe-outlook" id="section-9">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">9. And getting cheaper over time</h2>

                    <p>Everything shown so far reflects today’s costs.</p>

                    <p>But solar and batteries continue to get cheaper. Both have followed steep learning curves, and
                        major outlooks—from the IEA to BNEF—expect further declines.</p>

                    <p>As costs fall, high-uptime solar becomes competitive in more places. Regions that already work
                        today become even stronger, and new regions cross the viability threshold. To the right, you can
                        see this expansion directly.</p>

                    <p>Over time, high-uptime solar moves from viable in many places to viable in most. The case for
                        solar and storage is not static. It strengthens with time.</p>
                </div>
            </section>

            <!-- Section 10: The Path Forward -->
            <section class="scrolly-section" data-section="path-forward" id="section-10">
                <div class="scrolly-section-content">
                    <h2 class="scrolly-heading">The path forward</h2>

                    <p>The remaining barriers to baseload solar are no longer technical. They are institutional:
                        permitting, financing, grid rules, and planning processes built for a different energy system.</p>

                    <p class="scrolly-final">The technology is ready. In much of the world, the economics already are.
                        What happens next depends on whether energy systems adapt fast enough to reflect that reality.</p>

                    <div class="scrolly-cta">
                        <a href="../deployment/index.html" class="scrolly-button">
                            <span class="material-symbols-outlined">explore</span>
                            Explore the Full Interactive Tool
                        </a>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="scrolly-footer">
                <div class="scrolly-footer-content">
                    <h3 class="text-lg font-medium text-white mb-4">Data Sources</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-400">
                        <div>
                            <strong class="text-gray-300">Solar & Weather Data:</strong>
                            <p>NASA POWER (Prediction of Worldwide Energy Resources)</p>
                        </div>
                        <div>
                            <strong class="text-gray-300">Population Data:</strong>
                            <p>NASA SEDAC, Gridded Population of the World (GPW), v4</p>
                        </div>
                        <div>
                            <strong class="text-gray-300">Electricity Consumption:</strong>
                            <p>Chen et al. (2022), Global 1km × 1km gridded electricity consumption</p>
                        </div>
                        <div>
                            <strong class="text-gray-300">Power Plant Data:</strong>
                            <p>Global Energy Monitor, December 2024 release</p>
                        </div>
                    </div>
                    <div class="mt-8 pt-4 border-t border-white/10 text-center text-xs text-gray-500">
                        <p>Created by Daan Walter, 2025 • Baseload Solar Atlas</p>
                    </div>
                </div>
            </footer>
        </article>

        <!-- Right Panel: Visuals -->
        <div class="scrolly-visual" id="visual-panel">
            <!-- Map Container -->
            <div id="map" class="absolute inset-0 z-0 bg-[#0a0a0a]"></div>

            <!-- Section Indicator -->
            <div class="section-indicator" id="section-indicator">
                <div class="section-dot active" data-target="section-1"></div>
                <div class="section-dot" data-target="section-2"></div>
                <div class="section-dot" data-target="section-3"></div>
                <div class="section-dot" data-target="section-4"></div>
                <div class="section-dot" data-target="section-5"></div>
                <div class="section-dot" data-target="section-6"></div>
                <div class="section-dot" data-target="section-7"></div>
                <div class="section-dot" data-target="section-8"></div>
                <div class="section-dot" data-target="section-9"></div>
                <div class="section-dot" data-target="section-10"></div>
            </div>

            <!-- Visual Label -->
            <div class="visual-label" id="visual-label">
                <div class="visual-label-title">Capacity Factor</div>
                <div class="visual-label-subtitle">Solar: 5 MW • Battery: 8 MWh</div>
            </div>

            <!-- Legend (Capacity Factor) -->
            <div id="legend-capacity" class="visual-legend">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">Capacity Factor</div>
                <div class="w-full h-2 rounded-full mb-2 legend-gradient"></div>
                <div class="flex justify-between text-[10px] font-mono text-gray-500">
                    <span>0%</span>
                    <span>40%</span>
                    <span>70%</span>
                    <span>90%</span>
                    <span>100%</span>
                </div>
            </div>

            <!-- Legend (LCOE) - Hidden by default -->
            <div id="legend-lcoe" class="visual-legend hidden">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">LCOE ($/MWh)</div>
                <div class="w-full h-2 rounded-full mb-2 legend-gradient-cost"></div>
                <div class="flex justify-between text-[10px] font-mono text-gray-500">
                    <span id="legend-lcoe-min">--</span>
                    <span id="legend-lcoe-mid">--</span>
                    <span id="legend-lcoe-max">--</span>
                </div>
            </div>

            <!-- Legend (Potential Multiple) - Hidden by default -->
            <div id="legend-potential" class="visual-legend hidden">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">
                    Solar Potential / Demand (×)
                </div>
                <div id="legend-potential-buckets" class="space-y-1 text-[10px] text-gray-400"></div>
            </div>

            <!-- Legend (Population) - Hidden by default -->
            <div id="legend-population" class="visual-legend hidden">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">Population</div>
                <div class="w-full h-2 rounded-full mb-2 legend-gradient-pop"></div>
                <div class="flex justify-between text-[10px] font-mono text-gray-500">
                    <span>Sparse</span>
                    <span>Dense</span>
                </div>
            </div>

            <!-- Legend (Access) - Hidden by default -->
            <div id="legend-access" class="visual-legend hidden">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">Grid Reliability</div>
                <div class="w-full h-2 rounded-full mb-2"
                    style="background: linear-gradient(to right, #ef4444, #eab308, #22c55e);"></div>
                <div class="flex justify-between text-[10px] font-mono text-gray-500">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>
            </div>

            <!-- Legend (Uptime Comparison) - Hidden by default -->
            <div id="legend-uptime" class="visual-legend hidden">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">Grid Reliability</div>
                <div class="w-full h-2 rounded-full mb-2"
                    style="background: linear-gradient(to right, #ef4444, #000000);"></div>
                <div class="flex justify-between text-[10px] font-mono text-gray-500">
                    <span>0% (Fragile)</span>
                    <span>100% (Robust)</span>
                </div>
            </div>

            <!-- Legend (Weekly Animation) - Hidden by default -->
            <div id="legend-weekly" class="visual-legend hidden">
                <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-3">Energy Share (1 MW load)
                </div>
                <div class="space-y-2">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-sm bg-[#facc15]"></div>
                        <span class="text-[10px] text-gray-400">Sun (Direct Solar)</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-sm bg-[#a855f7]"></div>
                        <span class="text-[10px] text-gray-400">Battery Discharge</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-sm bg-[#9ca3af]"></div>
                        <span class="text-[10px] text-gray-400">Back-up Power</span>
                    </div>
                </div>
            </div>

            <!-- Animation Indicator -->
            <div id="animation-indicator"
                class="hidden absolute top-8 right-8 bg-surface/90 backdrop-blur-md border border-white/10 rounded-xl p-4 shadow-lg min-w-[280px]">
                <div class="flex flex-col gap-3">
                    <div class="flex items-center gap-2 border-b border-white/10 pb-2 mb-1">
                        <span class="material-symbols-outlined text-accent animate-pulse">battery_charging_full</span>
                        <div class="text-xs text-gray-300">
                            For <span class="text-white font-medium">1 MW</span> baseload:
                        </div>
                    </div>

                    <div class="space-y-1">
                        <div class="flex justify-between items-baseline text-sm">
                            <span class="text-gray-400">Solar:</span>
                            <span class="font-mono text-primary"><span id="solar-value-display">6</span> MW</span>
                        </div>
                        <input type="range" id="solar-slider" min="1" max="10" value="6" step="1"
                            class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-primary hover:accent-primary/80 transition-colors">
                    </div>

                    <div class="space-y-1">
                        <div class="flex justify-between items-baseline text-sm">
                            <span class="text-gray-400">Battery:</span>
                            <span class="font-mono text-accent"><span id="animation-value">0</span> MWh</span>
                        </div>
                        <input type="range" id="battery-slider" min="0" max="24" value="0" step="1"
                            class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-accent hover:accent-accent/80 transition-colors">
                    </div>
                </div>
            </div>

            <!-- LCOE Outlook Panel -->
            <div id="lcoe-outlook-panel"
                class="hidden absolute top-6 right-6 bg-surface/90 backdrop-blur-md border border-white/10 rounded-xl p-4 shadow-lg w-64 space-y-3">
                <div class="flex items-center justify-between">
                    <div id="lcoe-outlook-title" class="text-xs font-medium text-gray-300 uppercase tracking-wider">
                        LCOE Outlook
                    </div>
                    <button id="lcoe-outlook-play"
                        class="px-2 py-0.5 rounded bg-white/10 text-gray-300 text-[10px] hover:text-white hover:bg-white/20 transition-colors">
                        Play
                    </button>
                </div>
                <div id="lcoe-outlook-timeline" class="space-y-2">
                    <div class="flex items-center justify-between text-[10px] text-gray-400">
                        <span>Year</span>
                        <span id="lcoe-outlook-year" class="font-mono text-sky-300">2026</span>
                    </div>
                    <input type="range" id="lcoe-outlook-slider" min="2026" max="2050" step="1" value="2026"
                        class="w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-sky-400">
                </div>
                <div class="space-y-2">
                    <div class="text-[10px] text-gray-400 uppercase tracking-wider">Capex Source</div>
                    <div id="lcoe-outlook-capex-toggle" class="grid grid-cols-2 bg-white/5 rounded p-0.5">
                        <button data-mode="global"
                            class="px-2 py-0.5 rounded text-[10px] font-medium bg-gray-600 text-white shadow-sm">Global</button>
                        <button data-mode="local"
                            class="px-2 py-0.5 rounded text-[10px] font-medium text-gray-400 hover:text-white">Local</button>
                    </div>
                </div>
                <div class="space-y-2">
                    <div class="text-[10px] text-gray-400 uppercase tracking-wider">WACC Source</div>
                    <div id="lcoe-outlook-wacc-toggle" class="grid grid-cols-2 bg-white/5 rounded p-0.5">
                        <button data-mode="global"
                            class="px-2 py-0.5 rounded text-[10px] font-medium bg-gray-600 text-white shadow-sm">Global</button>
                        <button data-mode="local"
                            class="px-2 py-0.5 rounded text-[10px] font-medium text-gray-400 hover:text-white">Local</button>
                    </div>
                </div>
            </div>

            <!-- Standalone Target CF Slider (Deprecated - content moved inline) -->
            <div id="target-cf-container" class="hidden"></div>

            <!-- Dual Globe Container (for Step 4) -->
            <div id="dual-globe-container" class="hidden absolute inset-0 z-10 flex flex-col bg-[#0a0a0a]">

                <!-- View Toggle (Top Center) -->
                <div
                    class="absolute top-4 left-1/2 transform -translate-x-1/2 z-20 bg-surface/80 backdrop-blur border border-white/10 rounded-full p-1 flex gap-1">
                    <button id="step4-btn-map"
                        class="px-3 py-1 text-[10px] font-medium rounded-full bg-white/10 text-white transition-colors hover:bg-white/20">Map
                        View</button>
                    <button id="step4-btn-chart"
                        class="px-3 py-1 text-[10px] font-medium rounded-full text-gray-400 transition-colors hover:text-white hover:bg-white/10">Chart
                        View</button>
                </div>

                <!-- Chart Axes Layer (Hidden in Map Mode) -->
                <div id="step4-chart-axes"
                    class="absolute inset-0 z-10 pointer-events-none opacity-0 transition-opacity duration-500"></div>

                <!-- Top Globe: LCOE -->
                <div class="flex-1 relative overflow-hidden transition-all duration-700" id="globe-lcoe-container">
                    <div id="globe-lcoe-frame"
                        class="absolute inset-5 rounded-2xl border border-white/5 bg-[#0f0f0f]/60 backdrop-blur-sm overflow-hidden">
                        <svg id="globe-lcoe" class="absolute inset-0 w-full h-full z-0"></svg>
                        <canvas id="globe-lcoe-dots"
                            class="absolute inset-0 w-full h-full z-10 pointer-events-none"></canvas>
                        <svg id="globe-lcoe-axes" class="absolute inset-0 w-full h-full z-20 pointer-events-none"></svg>
                    </div>
                    <div id="globe-lcoe-label" class="visual-legend">
                        <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">LCOE ($/MWh)</div>
                        <div class="w-full h-2 rounded-full mb-2 legend-gradient-cost"></div>
                        <div class="flex justify-between text-[10px] font-mono text-gray-500">
                            <span>$50</span>
                            <span>$200+</span>
                        </div>
                    </div>
                </div>
                <!-- Divider -->
                <div id="step4-divider" class="h-px bg-white/10 transition-opacity duration-500"></div>
                <!-- Bottom Globe: Population -->
                <div class="flex-1 relative overflow-hidden transition-all duration-700" id="globe-pop-container">
                    <div id="globe-pop-frame"
                        class="absolute inset-5 rounded-2xl border border-white/5 bg-[#0f0f0f]/60 backdrop-blur-sm overflow-hidden">
                        <svg id="globe-population" class="absolute inset-0 w-full h-full z-0"></svg>
                        <canvas id="globe-pop-dots"
                            class="absolute inset-0 w-full h-full z-10 pointer-events-none"></canvas>
                        <svg id="globe-pop-axes" class="absolute inset-0 w-full h-full z-20 pointer-events-none"></svg>
                    </div>
                    <div id="globe-pop-label" class="visual-legend">
                        <div class="text-xs font-medium text-gray-400 uppercase tracking-wider mb-2">Population</div>
                        <div class="w-full h-2 rounded-full mb-2 legend-gradient-pop"></div>
                        <div class="flex justify-between text-[10px] font-mono text-gray-500">
                            <span>Sparse</span>
                            <span>Dense</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart Container (slides up when visible) -->
            <div id="chart-container" class="hidden">
                <!-- Single Chart Layout (Default) -->
                <div id="chart-layout-single" class="chart-wrapper">
                    <div class="chart-header flex flex-col md:flex-row md:items-center justify-between gap-4">
                        <div class="flex-1">
                            <div class="chart-title text-base font-bold text-white mb-1">Cost of solar + battery system
                                to provide power</div>
                            <div class="chart-subtitle text-xs text-slate-400">Description</div>
                        </div>
                        <!-- Inline Slider -->
                        <div id="inline-target-cf-container"
                            class="hidden min-w-[240px] bg-white/5 p-2 rounded-lg border border-white/10">
                            <div class="flex justify-between items-center mb-1">
                                <span class="text-[10px] text-gray-400 uppercase tracking-wider font-semibold">Target
                                    Uptime</span>
                                <span class="font-mono text-primary text-xs"><span
                                id="target-cf-display">80</span>%</span>
                            </div>
                            <input type="range" id="target-cf-slider" min="50" max="99" value="80" step="1"
                                class="w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-primary hover:accent-primary/80 transition-colors">
                        </div>
                    </div>
                    <div class="chart-canvas-wrapper">
                        <canvas id="scrolly-chart"></canvas>
                    </div>
                </div>

                <!-- Dual Chart Layout (For Section 6) -->
                <div id="chart-layout-dual"
                    class="hidden flex flex-col md:flex-row gap-4 w-full h-full p-4 overflow-hidden">
                    <div id="chart-wrapper-dual-1" class="chart-wrapper flex-1 min-w-0">
                        <div class="chart-header">
                            <div class="chart-title" id="dual-title-1">Population</div>
                            <div class="chart-subtitle" id="dual-subtitle-1">Description</div>
                        </div>
                        <div class="chart-canvas-wrapper">
                            <canvas id="scrolly-chart-1"></canvas>
                        </div>
                    </div>
                    <div id="chart-wrapper-dual-2" class="chart-wrapper flex-1 min-w-0">
                        <div class="chart-header">
                            <div class="chart-title" id="dual-title-2">Avg LCOE</div>
                            <div class="chart-subtitle" id="dual-subtitle-2">Description</div>
                        </div>
                        <div class="chart-canvas-wrapper">
                            <canvas id="scrolly-chart-2"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-interpolate-path@2.3.0/build/d3-interpolate-path.js"></script>

    <!-- Application Scripts -->
    <script type="module" src="js/scrolly.js"></script>
</body>

</html>
